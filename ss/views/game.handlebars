<form action="/games/{{id}}" method="post">
<table class="playerTable table table-striped">
    <thead>
        <tr>
            <th style="width: 20%"> </th>
            <th style="width: 20%"> {{player1}}</th>
            <th style="width: 20%"> {{player2}}</th>
            <th style="width: 20%"> {{player3}}</th>
            <th style="width: 20%"> {{player4}}</th>
        </tr>
    </thead>
    <tbody style="font-weight: bold ; color: black">
        <tr style="font-weight: bold ; color: white">
            <td style="background-color: #BF1363"> Sum of Score (0)</td>
            <td class="sum_1" style="background-color: #BF1363">{{total1}}</td>
            <td class="sum_2" style="background-color: #BF1363"> {{total2}}</td>
            <td class="sum_3" style="background-color: #BF1363"> {{total3}}</td>
            <td class="sum_4" style="background-color: #BF1363"> {{total4}}</td>
        </tr>
        <tr>
            <td>Round1</td>
            <td>
                <input class="player0" name="player0" style="width: 60px ; border-radius: 5px" type="text">
            </td>
            <td>
                <input class="player1" name="player1" style="width: 60px ; border-radius: 5px" type="text">
            </td>
            <td>
                <input class="player2" name="player2" style="width: 60px ; border-radius: 5px" type="text">
            </td>
            <td>
                <input class="player3" name="player3" style="width: 60px ; border-radius: 5px" type="text">
            </td>
        </tr>
        <tr>
            <td>Round2</td>
            <td>
                <input class="player0" name="player0" style="width: 60px ; border-radius: 5px" type="text">
            </td>
            <td>
                <input class="player1" name="player1" style="width: 60px ; border-radius: 5px" type="text">
            </td>
            <td>
                <input class="player2" name="player2" style="width: 60px ; border-radius: 5px" type="text">
            </td>
            <td>
                <input class="player3" name="player3" style="width: 60px ; border-radius: 5px" type="text">
            </td>
        </tr>
        <tr>
            <td>Round3</td>
            <td>
                <input class="player0" name="player0" style="width: 60px ; border-radius: 5px" type="text">
            </td>
            <td>
                <input class="player1" name="player1" style="width: 60px ; border-radius: 5px" type="text">
            </td>
            <td>
                <input class="player2" name="player2" style="width: 60px ; border-radius: 5px" type="text">
            </td>
            <td>
                <input class="player3" name="player3" style="width: 60px ; border-radius: 5px" type="text">
            </td>
        </tr>
        <tr>
            <td>Round4</td>
            <td>
                <input class="player0" name="player0" style="width: 60px ; border-radius: 5px" type="text">
            </td>
            <td>
                <input class="player1" name="player1" style="width: 60px ; border-radius: 5px" type="text">
            </td>
            <td>
                <input class="player2" name="player2" style="width: 60px ; border-radius: 5px" type="text">
            </td>
            <td>
                <input class="player3" name="player3" style="width: 60px ; border-radius: 5px" type="text">
            </td>
        </tr>
</table>
<hr style="border: 1px solid #BF1363;">
<button class="btn btn-primary" style="margin-left:40% ;margin-right:90%; width:180px ; height: 40px; background-color: #BF1363 ; border: none">Add round</button>
</form>
<script>
    $(document).ready(function () {
        i = 4;
        $('.btn').click(function (event) {
            i++;
            $('.playerTable').append(`<tr>
            <td>${'Round' + i}</td>
            <td>
                <input class="player0" name="player0" style="width: 60px ; border-radius: 5px" type="text">
            </td>
            <td>
                <input class="player1" name="player1" style="width: 60px ; border-radius: 5px" type="text">
            </td>
            <td>
                <input class="player2" name="player2" style="width: 60px ; border-radius: 5px" type="text">
            </td>
            <td>
                <input class="player3" name="player3" style="width: 60px ; border-radius: 5px" type="text">
            </td>
            </tr></tbody>`)
        })
        $('input').keyup(function () {
            $.ajax({
                url: '/ajax/{{id}}',
                method: 'POST',
                success: function (res) {
                    let sum_1 = 0;
                    let sum_2 = 0;
                    let sum_3 = 0;
                    let sum_4 = 0;
                    //{ { !--Caculate for each col using each-- } }
                    $('.player0').each(function () {
                        var num = $(this).val();
                        if (!(Number($(this).val()))) num = 0;
                        sum_1 += Number(num);
                        $('.sum_1').html(sum_1);
                    });
                    $('.player1').each(function () {
                        var num = $(this).val();
                        if (!(Number($(this).val()))) num = 0;
                        sum_2 += Number(num);
                        $('.sum_2').html(sum_2)
                    });
                    $('.player2').each(function () {
                        var num = $(this).val();
                        if (!(Number($(this).val()))) num = 0;
                        sum_3 += Number(num);
                        $('.sum_3').html(sum_3)
                    });
                    $('.player3').each(function () {
                        var num = $(this).val();
                        if (!(Number($(this).val()))) num = 0;
                        sum_4 += Number(num);
                        $('.sum_4').html(sum_4)
                    });
                }
            })
        })  // Trigger input

    })

</script>